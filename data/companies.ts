import { Company, QUESTION_TYPE_LABELS, PM_QUESTION_TYPE_LABELS, InterviewTrack, QuestionType, PMQuestionType } from "@/types";
import { questions } from "./questions";
import { pmQuestions } from "./pm-questions";

// Derive categories from actual questions for each company
function getCategoriesForCompany(companySlug: string, track: InterviewTrack = "consulting"): string[] {
  const questionPool = track === "consulting" ? questions : pmQuestions;
  const companyQuestions = questionPool.filter((q) => q.companySlug === companySlug);
  const types = [...new Set(companyQuestions.map((q) => q.type))];
  const labels = track === "consulting" ? QUESTION_TYPE_LABELS : PM_QUESTION_TYPE_LABELS;
  return types.map((type) => labels[type as keyof typeof labels] || type);
}

// Get actual question count for each company
function getQuestionCount(companySlug: string, track: InterviewTrack = "consulting"): number {
  const questionPool = track === "consulting" ? questions : pmQuestions;
  return questionPool.filter((q) => q.companySlug === companySlug).length;
}

export const companies: Company[] = [
  {
    slug: "mckinsey",
    name: "McKinsey & Company",
    logo: "ğŸ”·",
    logoUrl: "/logos/McKinsey_&_Company.png",
    description: "Global management consulting leader",
    questionCount: getQuestionCount("mckinsey"),
    categories: getCategoriesForCompany("mckinsey"),
    track: "consulting",
  },
  {
    slug: "bcg",
    name: "Boston Consulting Group",
    logo: "ğŸŸ¢",
    logoUrl: "/logos/Boston_Consulting_Group.png",
    description: "Strategy consulting powerhouse",
    questionCount: getQuestionCount("bcg"),
    categories: getCategoriesForCompany("bcg"),
    track: "consulting",
  },
  {
    slug: "bain",
    name: "Bain & Company",
    logo: "ğŸ”´",
    logoUrl: "/logos/Bain_and_Company.png",
    description: "Results-driven consulting firm",
    questionCount: getQuestionCount("bain"),
    categories: getCategoriesForCompany("bain"),
    track: "consulting",
  },
  {
    slug: "deloitte",
    name: "Deloitte Consulting",
    logo: "ğŸŸ©",
    logoUrl: "/logos/Deloitte.png",
    description: "Big Four consulting practice",
    questionCount: getQuestionCount("deloitte"),
    categories: getCategoriesForCompany("deloitte"),
    track: "consulting",
  },
  {
    slug: "accenture",
    name: "Accenture",
    logo: "ğŸŸ£",
    logoUrl: "/logos/Accenture.png",
    description: "Technology and strategy consulting",
    questionCount: getQuestionCount("accenture"),
    categories: getCategoriesForCompany("accenture"),
    track: "consulting",
  },
  {
    slug: "kearney",
    name: "Kearney",
    logo: "ğŸ”¶",
    logoUrl: "/logos/Kearny.png",
    description: "Operations-focused consulting",
    questionCount: getQuestionCount("kearney"),
    categories: getCategoriesForCompany("kearney"),
    track: "consulting",
  },
  {
    slug: "oliver-wyman",
    name: "Oliver Wyman",
    logo: "ğŸ”µ",
    logoUrl: "/logos/Oliver_Wyman.png",
    description: "Financial services expertise",
    questionCount: getQuestionCount("oliver-wyman"),
    categories: getCategoriesForCompany("oliver-wyman"),
    track: "consulting",
  },
  {
    slug: "roland-berger",
    name: "Roland Berger",
    logo: "â¬›",
    logoUrl: "/logos/Roland_Berger.png",
    description: "European strategy consultancy",
    questionCount: getQuestionCount("roland-berger"),
    categories: getCategoriesForCompany("roland-berger"),
    track: "consulting",
  },
  {
    slug: "lek",
    name: "L.E.K. Consulting",
    logo: "ğŸŸ¡",
    logoUrl: "/logos/LEK.png",
    description: "Sharp strategic insights",
    questionCount: getQuestionCount("lek"),
    categories: getCategoriesForCompany("lek"),
    track: "consulting",
  },
  {
    slug: "strategy-and",
    name: "Strategy&",
    logo: "ğŸŸ ",
    logoUrl: "/logos/Strategy&.png",
    description: "PwC's strategy consulting arm",
    questionCount: getQuestionCount("strategy-and"),
    categories: getCategoriesForCompany("strategy-and"),
    track: "consulting",
  },
];

// PM Companies
export const pmCompanies: Company[] = [
  {
    slug: "meta",
    name: "Meta (Facebook)",
    logo: "M",
    logoUrl: "/logos/Meta.png",
    description: "Social media and metaverse leader",
    questionCount: getQuestionCount("meta", "product-management"),
    categories: getCategoriesForCompany("meta", "product-management"),
    track: "product-management",
  },
  {
    slug: "google",
    name: "Google",
    logo: "G",
    logoUrl: "/logos/Google.png",
    description: "Search and cloud technology giant",
    questionCount: getQuestionCount("google", "product-management"),
    categories: getCategoriesForCompany("google", "product-management"),
    track: "product-management",
  },
  {
    slug: "amazon",
    name: "Amazon",
    logo: "A",
    logoUrl: "/logos/Amazon.png",
    description: "E-commerce and cloud computing leader",
    questionCount: getQuestionCount("amazon", "product-management"),
    categories: getCategoriesForCompany("amazon", "product-management"),
    track: "product-management",
  },
  {
    slug: "microsoft",
    name: "Microsoft",
    logo: "M",
    logoUrl: "/logos/Microsoft.png",
    description: "Enterprise software and cloud solutions",
    questionCount: getQuestionCount("microsoft", "product-management"),
    categories: getCategoriesForCompany("microsoft", "product-management"),
    track: "product-management",
  },
  {
    slug: "apple",
    name: "Apple",
    logo: "A",
    logoUrl: "/logos/Apple.png",
    description: "Consumer electronics and software",
    questionCount: getQuestionCount("apple", "product-management"),
    categories: getCategoriesForCompany("apple", "product-management"),
    track: "product-management",
  },
  {
    slug: "uber",
    name: "Uber",
    logo: "U",
    logoUrl: "/logos/Uber.png",
    description: "Ride-sharing and delivery platform",
    questionCount: getQuestionCount("uber", "product-management"),
    categories: getCategoriesForCompany("uber", "product-management"),
    track: "product-management",
  },
  {
    slug: "lyft",
    name: "Lyft",
    logo: "L",
    logoUrl: "/logos/Lyft.png",
    description: "Ride-sharing transportation network",
    questionCount: getQuestionCount("lyft", "product-management"),
    categories: getCategoriesForCompany("lyft", "product-management"),
    track: "product-management",
  },
  {
    slug: "airbnb",
    name: "Airbnb",
    logo: "A",
    logoUrl: "/logos/Airbnb.png",
    description: "Global hospitality marketplace",
    questionCount: getQuestionCount("airbnb", "product-management"),
    categories: getCategoriesForCompany("airbnb", "product-management"),
    track: "product-management",
  },
  {
    slug: "tiktok",
    name: "TikTok",
    logo: "T",
    logoUrl: "/logos/TikTok.png",
    description: "Short-form video platform",
    questionCount: getQuestionCount("tiktok", "product-management"),
    categories: getCategoriesForCompany("tiktok", "product-management"),
    track: "product-management",
  },
  {
    slug: "netflix",
    name: "Netflix",
    logo: "N",
    logoUrl: "/logos/Netflix.png",
    description: "Streaming entertainment service",
    questionCount: getQuestionCount("netflix", "product-management"),
    categories: getCategoriesForCompany("netflix", "product-management"),
    track: "product-management",
  },
  {
    slug: "dropbox",
    name: "Dropbox",
    logo: "D",
    logoUrl: "/logos/Dropbox.png",
    description: "Cloud storage and collaboration",
    questionCount: getQuestionCount("dropbox", "product-management"),
    categories: getCategoriesForCompany("dropbox", "product-management"),
    track: "product-management",
  },
  {
    slug: "linkedin",
    name: "LinkedIn",
    logo: "L",
    logoUrl: "/logos/LinkedIn.png",
    description: "Professional networking platform",
    questionCount: getQuestionCount("linkedin", "product-management"),
    categories: getCategoriesForCompany("linkedin", "product-management"),
    track: "product-management",
  },
  {
    slug: "doordash",
    name: "DoorDash",
    logo: "D",
    logoUrl: "/logos/DoorDash.png",
    description: "Food delivery marketplace",
    questionCount: getQuestionCount("doordash", "product-management"),
    categories: getCategoriesForCompany("doordash", "product-management"),
    track: "product-management",
  },
  {
    slug: "salesforce",
    name: "Salesforce",
    logo: "S",
    logoUrl: "/logos/Salesforce.png",
    description: "CRM and enterprise software",
    questionCount: getQuestionCount("salesforce", "product-management"),
    categories: getCategoriesForCompany("salesforce", "product-management"),
    track: "product-management",
  },
  {
    slug: "coinbase",
    name: "Coinbase",
    logo: "C",
    logoUrl: "/logos/Coinbase.png",
    description: "Cryptocurrency exchange platform",
    questionCount: getQuestionCount("coinbase", "product-management"),
    categories: getCategoriesForCompany("coinbase", "product-management"),
    track: "product-management",
  },
  {
    slug: "pinterest",
    name: "Pinterest",
    logo: "P",
    logoUrl: "/logos/Pinterest.png",
    description: "Visual discovery and bookmarking",
    questionCount: getQuestionCount("pinterest", "product-management"),
    categories: getCategoriesForCompany("pinterest", "product-management"),
    track: "product-management",
  },
  {
    slug: "twitter",
    name: "Twitter",
    logo: "T",
    logoUrl: "/logos/Twitter.png",
    description: "Social media and microblogging",
    questionCount: getQuestionCount("twitter", "product-management"),
    categories: getCategoriesForCompany("twitter", "product-management"),
    track: "product-management",
  },
  {
    slug: "yelp",
    name: "Yelp",
    logo: "Y",
    logoUrl: "/logos/Yelp.png",
    description: "Local business reviews platform",
    questionCount: getQuestionCount("yelp", "product-management"),
    categories: getCategoriesForCompany("yelp", "product-management"),
    track: "product-management",
  },
  {
    slug: "adobe",
    name: "Adobe",
    logo: "A",
    logoUrl: "/logos/Adobe.png",
    description: "Creative and document software",
    questionCount: getQuestionCount("adobe", "product-management"),
    categories: getCategoriesForCompany("adobe", "product-management"),
    track: "product-management",
  },
  {
    slug: "intuit",
    name: "Intuit",
    logo: "I",
    logoUrl: "/logos/Intuit.png",
    description: "Financial software solutions",
    questionCount: getQuestionCount("intuit", "product-management"),
    categories: getCategoriesForCompany("intuit", "product-management"),
    track: "product-management",
  },
  {
    slug: "capital-one",
    name: "Capital One",
    logo: "C",
    logoUrl: "/logos/CapitalOne.png",
    description: "Digital banking and financial services",
    questionCount: getQuestionCount("capital-one", "product-management"),
    categories: getCategoriesForCompany("capital-one", "product-management"),
    track: "product-management",
  },
  {
    slug: "zoom",
    name: "Zoom",
    logo: "Z",
    logoUrl: "/logos/Zoom.png",
    description: "Video communications platform",
    questionCount: getQuestionCount("zoom", "product-management"),
    categories: getCategoriesForCompany("zoom", "product-management"),
    track: "product-management",
  },
  {
    slug: "etsy",
    name: "Etsy",
    logo: "E",
    logoUrl: "/logos/Etsy.png",
    description: "Handmade and vintage marketplace",
    questionCount: getQuestionCount("etsy", "product-management"),
    categories: getCategoriesForCompany("etsy", "product-management"),
    track: "product-management",
  },
  {
    slug: "ebay",
    name: "eBay",
    logo: "E",
    logoUrl: "/logos/eBay.png",
    description: "Online auction and shopping",
    questionCount: getQuestionCount("ebay", "product-management"),
    categories: getCategoriesForCompany("ebay", "product-management"),
    track: "product-management",
  },
  {
    slug: "affirm",
    name: "Affirm",
    logo: "A",
    logoUrl: "/logos/Affirm.png",
    description: "Buy now, pay later fintech",
    questionCount: getQuestionCount("affirm", "product-management"),
    categories: getCategoriesForCompany("affirm", "product-management"),
    track: "product-management",
  },
  {
    slug: "brex",
    name: "Brex",
    logo: "B",
    logoUrl: "/logos/Brex.png",
    description: "Business financial services",
    questionCount: getQuestionCount("brex", "product-management"),
    categories: getCategoriesForCompany("brex", "product-management"),
    track: "product-management",
  },
  {
    slug: "roblox",
    name: "Roblox",
    logo: "R",
    logoUrl: "/logos/Roblox.png",
    description: "Gaming and metaverse platform",
    questionCount: getQuestionCount("roblox", "product-management"),
    categories: getCategoriesForCompany("roblox", "product-management"),
    track: "product-management",
  },
  {
    slug: "glassdoor",
    name: "Glassdoor",
    logo: "G",
    logoUrl: "/logos/Glassdoor.png",
    description: "Job search and company reviews",
    questionCount: getQuestionCount("glassdoor", "product-management"),
    categories: getCategoriesForCompany("glassdoor", "product-management"),
    track: "product-management",
  },
  {
    slug: "quora",
    name: "Quora",
    logo: "Q",
    logoUrl: "/logos/Quora.png",
    description: "Q&A knowledge platform",
    questionCount: getQuestionCount("quora", "product-management"),
    categories: getCategoriesForCompany("quora", "product-management"),
    track: "product-management",
  },
  {
    slug: "redfin",
    name: "Redfin",
    logo: "R",
    logoUrl: "/logos/Redfin.png",
    description: "Real estate technology company",
    questionCount: getQuestionCount("redfin", "product-management"),
    categories: getCategoriesForCompany("redfin", "product-management"),
    track: "product-management",
  },
  {
    slug: "stripe",
    name: "Stripe",
    logo: "S",
    description: "Payment processing platform",
    questionCount: getQuestionCount("stripe", "product-management"),
    categories: getCategoriesForCompany("stripe", "product-management"),
    track: "product-management",
  },
  {
    slug: "snap",
    name: "Snap Inc",
    logo: "S",
    description: "Social media and camera company",
    questionCount: getQuestionCount("snap", "product-management"),
    categories: getCategoriesForCompany("snap", "product-management"),
    track: "product-management",
  },
  {
    slug: "shopify",
    name: "Shopify",
    logo: "S",
    description: "E-commerce platform",
    questionCount: getQuestionCount("shopify", "product-management"),
    categories: getCategoriesForCompany("shopify", "product-management"),
    track: "product-management",
  },
  {
    slug: "square",
    name: "Square (Block)",
    logo: "S",
    description: "Financial services and payments",
    questionCount: getQuestionCount("square", "product-management"),
    categories: getCategoriesForCompany("square", "product-management"),
    track: "product-management",
  },
  {
    slug: "robinhood",
    name: "Robinhood",
    logo: "R",
    description: "Stock trading and investing app",
    questionCount: getQuestionCount("robinhood", "product-management"),
    categories: getCategoriesForCompany("robinhood", "product-management"),
    track: "product-management",
  },
  {
    slug: "instacart",
    name: "Instacart",
    logo: "I",
    description: "Grocery delivery platform",
    questionCount: getQuestionCount("instacart", "product-management"),
    categories: getCategoriesForCompany("instacart", "product-management"),
    track: "product-management",
  },
  {
    slug: "asana",
    name: "Asana",
    logo: "A",
    description: "Work management platform",
    questionCount: getQuestionCount("asana", "product-management"),
    categories: getCategoriesForCompany("asana", "product-management"),
    track: "product-management",
  },
  {
    slug: "waymo",
    name: "Waymo",
    logo: "W",
    description: "Autonomous driving technology",
    questionCount: getQuestionCount("waymo", "product-management"),
    categories: getCategoriesForCompany("waymo", "product-management"),
    track: "product-management",
  },
  {
    slug: "youtube",
    name: "YouTube",
    logo: "Y",
    description: "Video sharing platform",
    questionCount: getQuestionCount("youtube", "product-management"),
    categories: getCategoriesForCompany("youtube", "product-management"),
    track: "product-management",
  },
  {
    slug: "disney",
    name: "Disney",
    logo: "D",
    description: "Entertainment and streaming",
    questionCount: getQuestionCount("disney", "product-management"),
    categories: getCategoriesForCompany("disney", "product-management"),
    track: "product-management",
  },
  {
    slug: "walmart",
    name: "Walmart",
    logo: "W",
    description: "Retail and e-commerce giant",
    questionCount: getQuestionCount("walmart", "product-management"),
    categories: getCategoriesForCompany("walmart", "product-management"),
    track: "product-management",
  },
  {
    slug: "target",
    name: "Target",
    logo: "T",
    description: "Retail chain",
    questionCount: getQuestionCount("target", "product-management"),
    categories: getCategoriesForCompany("target", "product-management"),
    track: "product-management",
  },
  {
    slug: "fedex",
    name: "FedEx",
    logo: "F",
    description: "Logistics and shipping",
    questionCount: getQuestionCount("fedex", "product-management"),
    categories: getCategoriesForCompany("fedex", "product-management"),
    track: "product-management",
  },
  {
    slug: "expedia",
    name: "Expedia",
    logo: "E",
    description: "Online travel agency",
    questionCount: getQuestionCount("expedia", "product-management"),
    categories: getCategoriesForCompany("expedia", "product-management"),
    track: "product-management",
  },
  {
    slug: "wayfair",
    name: "Wayfair",
    logo: "W",
    description: "Home goods e-commerce",
    questionCount: getQuestionCount("wayfair", "product-management"),
    categories: getCategoriesForCompany("wayfair", "product-management"),
    track: "product-management",
  },
  {
    slug: "zillow",
    name: "Zillow",
    logo: "Z",
    description: "Real estate marketplace",
    questionCount: getQuestionCount("zillow", "product-management"),
    categories: getCategoriesForCompany("zillow", "product-management"),
    track: "product-management",
  },
  {
    slug: "oracle",
    name: "Oracle",
    logo: "O",
    description: "Enterprise software and cloud",
    questionCount: getQuestionCount("oracle", "product-management"),
    categories: getCategoriesForCompany("oracle", "product-management"),
    track: "product-management",
  },
  {
    slug: "paypal",
    name: "PayPal",
    logo: "P",
    description: "Digital payments platform",
    questionCount: getQuestionCount("paypal", "product-management"),
    categories: getCategoriesForCompany("paypal", "product-management"),
    track: "product-management",
  },
  {
    slug: "zendesk",
    name: "Zendesk",
    logo: "Z",
    description: "Customer service software",
    questionCount: getQuestionCount("zendesk", "product-management"),
    categories: getCategoriesForCompany("zendesk", "product-management"),
    track: "product-management",
  },
  {
    slug: "databricks",
    name: "Databricks",
    logo: "D",
    description: "Data analytics platform",
    questionCount: getQuestionCount("databricks", "product-management"),
    categories: getCategoriesForCompany("databricks", "product-management"),
    track: "product-management",
  },
  {
    slug: "datadog",
    name: "Datadog",
    logo: "D",
    description: "Cloud monitoring platform",
    questionCount: getQuestionCount("datadog", "product-management"),
    categories: getCategoriesForCompany("datadog", "product-management"),
    track: "product-management",
  },
  {
    slug: "openai",
    name: "OpenAI",
    logo: "O",
    description: "AI research and products",
    questionCount: getQuestionCount("openai", "product-management"),
    categories: getCategoriesForCompany("openai", "product-management"),
    track: "product-management",
  },
  {
    slug: "anthropic",
    name: "Anthropic",
    logo: "A",
    description: "AI safety and research",
    questionCount: getQuestionCount("anthropic", "product-management"),
    categories: getCategoriesForCompany("anthropic", "product-management"),
    track: "product-management",
  },
  {
    slug: "grammarly",
    name: "Grammarly",
    logo: "G",
    description: "Writing assistance tool",
    questionCount: getQuestionCount("grammarly", "product-management"),
    categories: getCategoriesForCompany("grammarly", "product-management"),
    track: "product-management",
  },
  {
    slug: "sofi",
    name: "SoFi",
    logo: "S",
    description: "Personal finance platform",
    questionCount: getQuestionCount("sofi", "product-management"),
    categories: getCategoriesForCompany("sofi", "product-management"),
    track: "product-management",
  },
  {
    slug: "tinder",
    name: "Tinder",
    logo: "T",
    description: "Dating app",
    questionCount: getQuestionCount("tinder", "product-management"),
    categories: getCategoriesForCompany("tinder", "product-management"),
    track: "product-management",
  },
  {
    slug: "coursera",
    name: "Coursera",
    logo: "C",
    description: "Online learning platform",
    questionCount: getQuestionCount("coursera", "product-management"),
    categories: getCategoriesForCompany("coursera", "product-management"),
    track: "product-management",
  },
  {
    slug: "indeed",
    name: "Indeed",
    logo: "I",
    description: "Job search platform",
    questionCount: getQuestionCount("indeed", "product-management"),
    categories: getCategoriesForCompany("indeed", "product-management"),
    track: "product-management",
  },
  {
    slug: "monzo",
    name: "Monzo",
    logo: "M",
    description: "Digital banking",
    questionCount: getQuestionCount("monzo", "product-management"),
    categories: getCategoriesForCompany("monzo", "product-management"),
    track: "product-management",
  },
  {
    slug: "revolut",
    name: "Revolut",
    logo: "R",
    description: "Financial super app",
    questionCount: getQuestionCount("revolut", "product-management"),
    categories: getCategoriesForCompany("revolut", "product-management"),
    track: "product-management",
  },
  {
    slug: "samsung",
    name: "Samsung",
    logo: "S",
    description: "Consumer electronics",
    questionCount: getQuestionCount("samsung", "product-management"),
    categories: getCategoriesForCompany("samsung", "product-management"),
    track: "product-management",
  },
  {
    slug: "mozilla",
    name: "Mozilla",
    logo: "M",
    description: "Web browser and internet tools",
    questionCount: getQuestionCount("mozilla", "product-management"),
    categories: getCategoriesForCompany("mozilla", "product-management"),
    track: "product-management",
  },
  {
    slug: "agoda",
    name: "Agoda",
    logo: "A",
    description: "Travel booking platform",
    questionCount: getQuestionCount("agoda", "product-management"),
    categories: getCategoriesForCompany("agoda", "product-management"),
    track: "product-management",
  },
  {
    slug: "nubank",
    name: "Nubank",
    logo: "N",
    description: "Digital bank",
    questionCount: getQuestionCount("nubank", "product-management"),
    categories: getCategoriesForCompany("nubank", "product-management"),
    track: "product-management",
  },
  {
    slug: "lululemon",
    name: "Lululemon",
    logo: "L",
    description: "Athletic apparel",
    questionCount: getQuestionCount("lululemon", "product-management"),
    categories: getCategoriesForCompany("lululemon", "product-management"),
    track: "product-management",
  },
];

// Get all companies across both tracks
export const allCompanies: Company[] = [...companies, ...pmCompanies];

// Get companies by track
export function getCompaniesByTrack(track: InterviewTrack): Company[] {
  return track === "consulting" ? companies : pmCompanies;
}

export function getCompanyBySlug(slug: string): Company | undefined {
  return allCompanies.find((c) => c.slug === slug);
}
